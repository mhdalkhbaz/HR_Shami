@model HRApp.Models.ListViewContent

<style>


    .green {
        background: green;
    }

    .yellow {
        background: yellow;
    }

    .blue {
        background: blue;
    }

    #chartContainer {
        height: 300px;
    }

    #container {
        height: 300px;
    }


    #container2 {
        height: 300px;
    }


    #container3 {
        height: 300px;
    }


    .highcharts-figure,
    .highcharts-data-table table {
        min-width: 310px;
        max-width: 800px;
        margin: 1em auto;
    }

    .highcharts-data-table table {
        font-family: Verdana, sans-serif;
        border-collapse: collapse;
        border: 1px solid #ebebeb;
        margin: 10px auto;
        text-align: center;
        width: 100%;
        max-width: 500px;
    }

    .highcharts-data-table caption {
        padding: 1em 0;
        font-size: 1.2em;
        color: #555;
    }

    .highcharts-data-table th {
        font-weight: 600;
        padding: 0.5em;
    }

    .highcharts-data-table td,
    .highcharts-data-table th,
    .highcharts-data-table caption {
        padding: 0.5em;
    }

    .highcharts-data-table thead tr,
    .highcharts-data-table tr:nth-child(even) {
        background: #f8f8f8;
    }

    .highcharts-data-table tr:hover {
        background: #f1f7ff;
    }

    svg.highcharts-root {
        width: 100%;
    }

    div#highcharts-9uvgwf3-0.highcharts-container {
        height: 300px;
    }
</style>

@*------------------ section 1*@




<div class="row">


    <div class="col-lg-3   h-100">
        <h3 class="text-center">Shami Cafe</h3>
        <ul class="list-group">
            <li class="list-group-item d-flex justify-content-between align-items-center">
                عدد الموظفين
                <span class="badge bg-primary rounded-pill">@ViewBag.Employees</span>

            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                موظفين الشفت الصباحي
                <span class="badge bg-primary rounded-pill">@ViewBag.EmployeesMorning</span>

            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                موظفين الشفت المسائي
                <span class="badge bg-primary rounded-pill">@ViewBag.EmployeesEvning</span>

            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                المتدربين
                <span class="badge bg-primary rounded-pill">@ViewBag.StartWorkEmp</span>

            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                المستقيلين
                <span class="badge bg-primary rounded-pill">@ViewBag.EndWorkEmp</span>

            </li>

            <li class="list-group-item d-flex justify-content-between align-items-center">
                نقص الكادر
                <span class="badge bg-primary rounded-pill">20 </span>

            </li>
        </ul>
    </div>

    <!-- --------------------- -->

    <div class="col-lg-3      ">



        <figure class="highcharts-figure">
            <div id="container3"></div>

        </figure>
    </div>

    <!-- --------------------- -->

    <div class="col-lg-3">

        <figure class="highcharts-figure">

            <div id="container2"></div>
        </figure>

    </div>


    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    <script src="https://code.highcharts.com/modules/pattern-fill.js"></script>
    <script src="https://code.highcharts.com/themes/high-contrast-light.js"></script>


    <div class="col-lg-3      ">

        <figure class="highcharts-figure">

            <div id="container"></div>
        </figure>



    </div>



</div>



<script>


    Highcharts.chart('container2', {
        chart: {
            type: 'column'
        },
        credits: {
            enabled: false
        },
        title: {
            text: 'إضافي الموظفين خلال الشهر'
        },

        xAxis: {
            type: 'category',
            labels: {
                rotation: -45,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: ' عدد مرات الاضافي '
            }
        },
        legend: {
            enabled: false
        },
        tooltip: {
            pointFormat: '</b>'
        },
        series: [{
            name: 'Population',
            data: [

                [ '@ViewBag.OverTimeEmp[0].Name', @ViewBag.OverTimeEmp[0].OverTime1],
                [ '@ViewBag.OverTimeEmp[1].Name', @ViewBag.OverTimeEmp[1].OverTime1],
                [ '@ViewBag.OverTimeEmp[2].Name', @ViewBag.OverTimeEmp[2].OverTime1],
                [ '@ViewBag.OverTimeEmp[3].Name', @ViewBag.OverTimeEmp[3].OverTime1],
                [ '@ViewBag.OverTimeEmp[4].Name', @ViewBag.OverTimeEmp[4].OverTime1],


        ],
        dataLabels: {
            enabled: true,
            rotation: -90,
            color: '#FFFF11',
            align: 'right',
            //format: '{point.y:.1f}', // one decimal
            y: 10, // 10 pixels down from the top
            style: {
                fontSize: '13px',
                fontFamily: 'Verdana, sans-serif'
            }
        }
        }]
        });



        //----------------------------------------------------------------

    Highcharts.chart('container', {
        chart: {
            type: 'column'
        },
        credits: {
            enabled: false
        },
        title: {
            text: 'تأخر الموظفين خلال الشهر'
        },

        xAxis: {
            type: 'category',
            labels: {
                rotation: -45,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: '   عدد مرات التأخير'
            }
        },
        legend: {
            enabled: false
        },
        tooltip: {
            pointFormat: '</b>'
        },
        series: [{
            name: 'Population',
            data: [

                [ '@ViewBag.LateEmp[0].Name', @ViewBag.LateEmp[0].LateHour],
                [ '@ViewBag.LateEmp[1].Name', @ViewBag.LateEmp[1].LateHour],
                [ '@ViewBag.LateEmp[2].Name', @ViewBag.LateEmp[2].LateHour],
                [ '@ViewBag.LateEmp[3].Name', @ViewBag.LateEmp[3].LateHour],
                [ '@ViewBag.LateEmp[4].Name', @ViewBag.LateEmp[4].LateHour],


        ],
        dataLabels: {
            enabled: true,
            rotation: -90,
            color: '#ff0000',
            align: 'right',
            //format: '{point.y:.1f}', // one decimal
            y: 10, // 10 pixels down from the top
            style: {
                fontSize: '13px',
                fontFamily: 'Verdana, sans-serif'
            }
        }
        }]
        });





        //----------------------------------------------bar chrt



                var clrs = Highcharts.getOptions().colors;
        var pieColors = [clrs[2], clrs[0], clrs[3], clrs[1], clrs[4]];

        // Get a default pattern, but using the pieColors above.
        // The i-argument refers to which default pattern to use
        function getPattern(i) {
          return {
            pattern: Highcharts.merge(Highcharts.patterns[i], {
              color: pieColors[i]
            })
          };
        }

        // Get 5 patterns
        var patterns = [0, 1, 2, 3, 4].map(getPattern);

        var chart = Highcharts.chart('container3', {
          chart: {
            type: 'pie'
            },
            credits: {
                enabled: false
            },
          title: {
            text: 'دوام الموظفين'
          },



          colors: patterns,

          tooltip: {
            //valueSuffix: '%',
            borderColor: '#8ae'
          },

          //plotOptions: {
          //  series: {
          //    dataLabels: {
          //      enabled: true,
          //      connectorColor: '#777',
          //      //format: '<b>{point.name}</b>: {point.percentage:.1f} %'
          //    },
          //    point: {
          //      events: {
          //        click: function () {
          //          window.location.href = this.website;
          //        }
          //      }
          //    },
          //    cursor: 'pointer',
          //    borderWidth: 3
          //  }
          //},

          series: [{
            //name: 'Screen reader usage',
            data: [{
              name: 'الشفت الصباحي',
              y: @ViewBag.EmployeesMorning,

            },
                {
                    name: 'الشفت المسائي',
                    y: @ViewBag.EmployeesEvning,
                }
                ,
                {
                    name: '  نقص الكادر ' ,
                    y: 20,
                }
            ]
          }],

          responsive: {
            rules: [{
              condition: {
                maxWidth: 500
              },
              //chartOptions: {
              //  plotOptions: {
              //    series: {
              //      dataLabels: {
              //        format: '<b>{point.name}</b>'
              //      }
              //    }
              //  }
              //}
            }]
          }
        });

        //// Toggle patterns enabled
        //document.getElementById('patterns-enabled').onclick = function () {
        //  chart.update({
        //    colors: this.checked ? patterns : pieColors
        //  });
        //        };

</script>

    </div>

@*------------------ section 2*@


<form asp-controller="vi_emp_this_month" asp-action="Live" method="get">
    <p>

        Date Day
        <input type="date" name="SearchString">
        <input type="submit" value="Filter" />
    </p>
</form>


<div class="row">

    @foreach (var item in Model.ListOfViewContent)
    {



        IList<ViewContent> valuesList = item.Value.Where(w => w.depId == 2).ToList();

        IList<ViewContent> valuesListHQ = item.Value.Where(w => w.depId == 1).ToList();

        valuesList = valuesList.OrderBy(e => e.InHour).ToList();



        var valuesListFirst = valuesList.Select(m => m.Time_InHour).FirstOrDefault();

        //Console.WriteLine(valuesListFirst);
        @*<h5> @valuesListFirst </h5>

            break;*@

        @*مربع المحتوى*@
        <div class="col-sm-12 col-md-6 col-lg-2 content_p" style="">

            @*ايمتى فتح*@
            <div class="col-sm-12 col-xs-6 col-lg-6  goLeft" style="font-size: 12px;font-family: monospace; margin: 0">
                <p> @valuesListFirst </p>
            </div>


            @*اسم المحل*@



            <div class="Open col-sm-12 col-xs-6 col-lg-6" style=" padding: 0;">
                <tr>
                    <td>
                        <h5 style="color: #1e0042cc;">     @Html.DisplayFor(modelItem => item.Key): </h5>
                    </td>
                </tr>
            </div>



            @*ا/لموظفين مع اوقات الدخول والخروج*@
            <div class="scrol">

                <table class="table">

                    @foreach (var raw in valuesList)
                    {
                        <tbody>
                        <td>
                            @Html.DisplayFor(modelItem => raw.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => raw.Time_InHour)

                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => raw.Time_OutHour)
                        </td>
                        </tbody>
                    }
                </table>
            </div>

        </div>

    }

</div>


